<!-- Favicon -->
<link rel="shortcut icon" type="image/x-icon" href="/assetsAdmin/imgs/theme/favicon.svg">
<!-- Template CSS -->
<link href="/assetsAdmin/css/main.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<main class="main">
    <div class="page-header breadcrumb-wrap">
        <div class="container">
            <div class="breadcrumb">
                <a href="/" rel="nofollow">Home</a>
                <span></span> Pages
                <span></span> Account
            </div>
        </div>
    </div>
    <section class="content-main col-md-11">
        <div class="content-header">
            <h2 class="content-title">Profile setting </h2>
        </div>
        <div class="card">
            <div class="card-body">
                <div class="row gx-5">
                    <aside class="col-lg-3 border-end">
                        <nav class="nav nav-pills flex-lg-column mb-4">
                            <a class="nav-link active" aria-current="page" href="#">General</a>
                            <a class="nav-link" href="#">Orders</a>
                            <a class="nav-link" href="#">Track Your Order</a>
                            <a class="nav-link" href="#">My Address</a>
                            <a class="nav-link" href="/wallet">Wallet</a>
                            <a class="nav-link" href="#">Newsletter</a>
                        </nav>
                    </aside>
                    <div class="col-lg-9">
                        <section class="content-body p-xl-4">
                            <form method="post" action="/update_details/{{userData._id}}" onsubmit="return Validation()">
                                <div class="row">
                                    <div class="col-lg-8">
                                        <div class="row gx-3">
                                            <div class="col-12 mb-3">
                                                <label class="form-label">Name</label>
                                                <input class="form-control" type="text" placeholder="Enter your name"
                                                    value="{{userData.name}}" name="name" id="name">
                                                <div class="error" style="color: red;" id="nameError"></div>
                                            </div>
                                            <div class="col-lg-12 mb-3">
                                                <label class="form-label">Email</label>
                                                <input class="form-control" type="email" placeholder="Enter your email"
                                                    value="{{userData.email}}" name="email" id="email">
                                                <div class="error" style="color: red;" id="emailError"></div>
                                            </div>
                                            <div class="col-lg-12 mb-3">
                                                <label class="form-label">Phone</label>
                                                <input class="form-control" type="tel"
                                                    placeholder="Enter your phone number" value="{{userData.mobile}}"
                                                    name="mobile" id="mobile">
                                                <div class="error" style="color: red;" id="phonenoError"></div>
                                            </div>
                                            {{!-- <div class="col-lg-12  mb-3">
                                                <label class="form-label">Address</label>
                                                <input class="form-control" type="text" placeholder="Type here">
                                            </div> <!-- col .// -->
                                            <div class="col-lg-6  mb-3">
                                                <label class="form-label">Birthday</label>
                                                <input class="form-control" type="date">
                                            </div> <!-- col .// --> --}}
                                        </div> <!-- row.// -->
                                    </div> <!-- col.// -->
                                    {{!-- <aside class="col-lg-4">
                                        <figure class="text-lg-center">
                                            <img class="img-lg mb-3 img-avatar"
                                                src="/assetsAdmin/imgs/people/avatar1.jpg" alt="User Photo">
                                            <input class="img-lg mb-3 img-avatar" type="file" placeholder="Type here"
                                                class="form-control-file" name="image" id="product_name" />
                                            <figcaption>
                                                <a class="btn btn-light rounded font-md" href="#">
                                                    <i class="icons material-icons md-backup font-md"></i> Upload
                                                </a>
                                            </figcaption>
                                        </figure>
                                    </aside> <!-- col.// --> --}}
                                    <aside class="col-lg-4">
                                        <figure class="text-lg-center">
                                            <label for="fileInput">
                                                <img class="img-lg mb-3 img-avatar" src="/images/users/profile.jpg"
                                                    alt="User Photo" id="userPhoto">
                                                <input type="file" id="fileInput"
                                                    class="img-lg mb-3 img-avatar visually-hidden" accept="image/*"
                                                    onchange="previewImage(this)" name="image">
                                                <figcaption>
                                                    <a class="btn btn-light rounded font-md" href="#"
                                                        onclick="document.getElementById('fileInput').click(); return false;">
                                                        <i class="icons material-icons md-backup font-md"></i> Upload
                                                    </a>
                                                </figcaption>
                                            </label>
                                        </figure>
                                    </aside> <!-- col.// -->




                                </div> <!-- row.// -->
                                <br>
                                <button class="btn btn-primary" type="submit">Save Changes</button>
                                     <a href ="#" id="backButton" type="button"
                                                        class="btn btn-primary">Back</a>
                            </form>
                            <hr class="my-5">
                            {{!-- <div class="row" style="max-width:920px">
                                <div class="col-md">
                                    <article class="box mb-3 bg-light">
                                        <a class="btn float-end btn-light btn-sm rounded font-md" href="#">Change</a>
                                        <h6>Password</h6>
                                        <small class="text-muted d-block" style="width:70%">You can reset or change your
                                            password by clicking here</small>
                                    </article>
                                </div> <!-- col.// -->
                                <div class="col-md">
                                    <article class="box mb-3 bg-light">
                                        <a class="btn float-end btn-light rounded btn-sm font-md"
                                            href="#">Deactivate</a>
                                        <h6>Remove account</h6>
                                        <small class="text-muted d-block" style="width:70%">Once you delete your
                                            account, there is no going back.</small>
                                    </article>
                                </div> <!-- col.// -->
                            </div> <!-- row.// --> --}}
                        </section> <!-- content-body .// -->
                    </div> <!-- col.// -->
                </div> <!-- row.// -->
            </div> <!-- card body end// -->
        </div> <!-- card end// -->
    </section> <!-- content-main end// -->
</main>

<script src="/assetsAdmin/js/vendors/jquery-3.6.0.min.js"></script>
<script src="/assetsAdmin/js/vendors/bootstrap.bundle.min.js"></script>
<script src="/assetsAdmin/js/vendors/select2.min.js"></script>
<script src="/assetsAdmin/js/vendors/perfect-scrollbar.js"></script>
<script src="/assetsAdmin/js/vendors/jquery.fullscreen.min.js"></script>
<!-- Main Script -->
<script src="/assetsAdmin/js/main.js" type="text/javascript"></script>
<script>
    function Validation() {
        let errors = []
        var username = document.getElementById('name').value;
        var email = document.getElementById('email').value;
        var phoneNumber = document.getElementById('mobile').value;


        var nameerror = document.getElementById('nameError')
        var emailerror = document.getElementById('emailError')
        var phonenoerror = document.getElementById('phonenoError')

        var userPattern = /^[a-zA-Z0-9]{3,}$/;
        var emailPattern = /^\S+@\S+\.\S+$/;
        var phonePattern = /^\d{10}$/;


        if (!username.match(userPattern)) {
            errors.push("Required username")
        }

        if (!email.match(emailPattern)) {
            errors.push("Required email")
        }
        if (!phoneNumber.match(phonePattern)) {
            errors.push("Required phone number")
        }



        // Display all error messages
        if (errors.length > 0) {
           nameerror.innerHTML = errors.includes("Required username") ? "Required username" : "";
           emailerror.innerHTML = errors.includes("Required email") ? "Required email" : "";
            phonenoerror.innerHTML = errors.includes("Required phone number") ? "Required phone number" : "";


            return false; // Prevent form submission
        }

        return true; // Allow form submissio

    }



</script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  // Function to show the SweetAlert confirmation dialog
  function showConfirmation() {
    Swal.fire({
      title: 'Are you sure?',
      text: "You have unsaved changes. If you leave, your changes will be lost.",
      icon: 'question',
      showCancelButton: true,
      confirmButtonColor: '#3085d6',
      cancelButtonColor: '#d33',
      confirmButtonText: 'Yes, leave',
      cancelButtonText: 'No, stay'
    }).then((result) => {
      if (result.isConfirmed) {
        // Redirect to the profile page
        window.location.href = '/profile';
      }
    });
  }

  // Attach the event listener to the "Back" button
  document.getElementById('backButton').addEventListener('click', function(event) {
    event.preventDefault(); // Prevent the default anchor behavior
    showConfirmation(); // Show the confirmation dialog
  });
</script>